<p style="color: green"><%= notice %></p>

<div class="row">
  <div class="col-sm-10">
    <%= month_calendar(events: @articles) do |date, articles| %>
      <div class="day">
        <%= date.day %>
        <% articles.each do |article| %>
          <div class="card-header">
            <h5 class="card-title">
              <% if article.persons.any? %>
                <%= link_to "#{article.persons.first.name}#{'...' if article.persons.count > 1}", article %>
              <% else %>
                <!-- こちらは、記事に関連するpersonがいない場合の処理 -->
                <%= link_to article.title, article %>
              <% end %>
            </h5>
          </div>
        <% end %>
    <% end %>
  </div>
  <div class="col-sm-2">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">名前</h5>
          <p class="card-text">
            <% @persons.each do |person| %>
              <%= person.name %><br>
            <% end %>
          </p>
        </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-12 mt-3">
    <div class="row" id="articles">
      <% @articles.each do |article| %>
        <div class="col-sm-3 mb-3">
          <%= render article %>
        </div>
      <% end %>
    </div>
    <%= paginate @articles %>
    <% if Rails.env == "development" %>
      <p>
        debug用に記事数を表示:<%= @number_of_articles %>
      </p>
    <% end %>
  </div>
</div>
