<div class="row align-items-end top-contents-container">
  <p style="color: green"><%= notice %></p>
  <div class="col-sm-10">
    <%= week_calendar(events: @articles, number_of_weeks: 4) do |date, articles| %>
      <div class="day">
        <%= date.day %>
        <% articles.each do |article| %>
          <div class="card-header">
            <h6 class="card-title">
              <% if article.persons.any? %>
                <%= link_to "#{article.persons.first.name}#{'...' if article.persons.count > 1}", article %>
              <% else %>
                <%= link_to article.body, article %>
              <% end %>
            </h6>
          </div>
        <% end %>
    <% end %>
  </div>

  <div class="col-sm-2 mb-3">
    <div class="card">
      <div class="card-body">
        <p class="card-text">
          <% @persons.each do |person| %>
            <%= person.name %><br>
          <% end %>
        </p>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-9 mt-3">
    <div class="card create-new">
      <div class="card-body">
        <h3 class="card-title px-2"><%= Time.current.strftime('%Y年%m月%d日') %></h3>
        <%= render "form", article: Article.new %>
      </div>
    </div>
  </div>
  <div class="col-sm-3 mt-3">
    <div class="row" id="articles">
      <% @articles.each do |article| %>
        <div class="col-sm-12 mb-3">
          <%= render article %>
        </div>
      <% end %>
    </div>
    <%= paginate @articles %>
    <% if Rails.env == "development" %>
      <p>
        debug用に記事数を表示:<%= @number_of_articles %>
      </p>
    <% end %>
  </div>
</div>
